# Product Picker (Pendant Chooser)

A pairwise ranking application for pendant images using TrueSkill Bayesian rating and Gradio UI.

## Features

- ğŸ–¼ï¸ Scans folders of pendant images (supports JPG, PNG, WEBP, BMP, TIFF)
- ğŸ’¾ Stores metadata and ratings in SQLite via SQLModel
- ğŸ¯ Side-by-side comparison UI using Gradio
- ğŸ“Š TrueSkill Bayesian rating system (successor to Elo)
- ğŸ† Real-time leaderboard with conservative scores (Î¼ - 3Ïƒ)
- ğŸ“ˆ Match history tracking

## Installation

```bash
# Install with uv (recommended - fast and modern)
uv sync

# Or with pip (traditional)
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate
pip install -r requirements.txt

# For development (includes Jupyter)
uv sync --extra dev
# Or: pip install -r requirements-dev.txt
```

## Usage

### From Python

```python
from product_picker.app import launch_app

# Launch the Gradio interface
launch_app()
```

### From Jupyter Notebook

See `notebooks/pendant_chooser.ipynb` for an interactive notebook interface.

### Command Line

```bash
python -m product_picker
# With uv
uv run python -m product_picker

# Or activate venv first
source .venv/bin/activate  # On Windows: .venv\Scripts\activate
```

## How It Works

1. **Scan**: Point to a folder containing pendant images
2. **Compare**: Choose between pairs of images (Left/Right/Draw/Skip)
3. **Rank**: TrueSkill updates ratings after each comparison
4. **View**: Leaderboard shows top-ranked items with confidence scores

### TrueSkill Rating System

- Represents skill as N(Î¼, ÏƒÂ²) - a normal distribution with mean (Î¼) and uncertainty (Ïƒ)
- Conservative score = Î¼ - 3Ïƒ (99.7% confidence lower bound)
- Prioritizes high-uncertainty items and close matchups for informative comparisons
- Penalizes repeated pair comparisons to avoid loops

### Data Persistence

- Database stored at `YOUR_FOLDER/.pendant_ranker/pendants.sqlite`
- Last used folder remembered at `~/.pendant_chooser/config.json`
- SHA-256 content hashing prevents duplicates
- Ratings persist across sessions
- Simply load the same folder to continue where you left off

## Project Structure

```
product_picker/
â”œâ”€â”€ src/product_picker/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ models.py          # SQLModel database schemas
â”‚   â”œâ”€â”€ database.py        # Database operations
â”‚   â”œâ”€â”€ rating.py          # TrueSkill rating logic
â”‚   â”œâ”€â”€ images.py          # Image loading and processing
â”‚   â”œâ”€â”€ matching.py        # Pair selection heuristics
â”‚   â”œâ”€â”€ ui.py              # Gradio interface
â”‚   â””â”€â”€ app.py             # Main application entry point
â”œâ”€â”€ notebooks/
â”‚   â””â”€â”€ pendant_chooser.ipynb
â”œâ”€â”€ tests/
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
```

## License

MIT
